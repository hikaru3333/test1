<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Character Stats</title>
  <style>
    body {
      background-color: rgb(229, 219, 245);
      margin: 1;
    }
    canvas {
      display: block;
      border: 1px solid #000;
    }
    h1 {
      text-align: center;
      font-size: 15px;
    }
    h2 {
      font-size: 12px;
    }
    h3 {
      font-size: 10px;
    }
    .textContainer {
      font-size: 12px;
    }
    #canvasContainer {
      font-size: 12px;
      background-color: white;
      width: 313px; /* 幅を設定 */
      height: 650px; /* 高さを設定 */
      overflow: auto;
      margin: auto;
    }
  </style>
</head>
<body>
  <h1>ランダムキャラメーカー</h1>
  <div class="textContainer">
    <h2>　名前を入力して性別と種族を選ぶ<br>------------------------------------------------------------<br>　状態値：先天的特徴<br>　気質：性格、人間性<br>　基礎能力：戦闘能力の基準<br>　属性：いい感じに解釈して(てきとう)<br>------------------------------------------------------------<br>　E→まるでダメ<br>　D→ボチボチ<br>　C→一般人<br>　B→優秀<br>　A→極めて優秀<br>　S→ネ申<br></h2>
    <label for="variableInput">名前：</label>
    <input type="text" id="variableInput"><br>
    <label for="selectInput">性別：</label>
    <select id="selectInput">
        <option value=0>♀</option>
        <option value=1>♂</option>
    </select>
    <label for="selectInput1">種族：</label>
    <select id="selectInput1">
        <option value=0>人間</option>
        <option value=1>エルフ</option>
        <option value=2>魔族</option>
        <option value=3>ドワーフ</option>
        <option value=4>竜人</option>
        <option value=5>羽人</option>
        <option value=6>悪魔</option>
        <option value=7>魚人</option>
        <option value=8>妖精</option>
    </select>
    <button onclick="changeVariable()">決定＆再生成</button>
  </div>
  <div id="canvasContainer">
    <label for="mean">平均値：</label>
    <input type="number" id="mean" value="50"><br>
    <label for="stdDev">標準偏差：</label>
    <input type="number" id="stdDev" value="17">
    <button onclick="generateRandomNumbers()">乱数生成</button><br>
    <h1 id="generatedText1"></h1>
    <br>
    <canvas id="characterCanvas" width="310" height="570"></canvas>
    <button onclick="changeVariable()">決定＆再生成</button>
    <h2 id="generatedText"></h2>
    <br><br><br><br><br><br><br><br><br>
  </div>
  <br><br><br><br>
  <h3>hikaru 2023</h3>
<script>
var canvas = document.getElementById("characterCanvas");
var ctx = canvas.getContext("2d");

//入力欄*********************
CharacterName = getRandomValue(["ヒトガ・ゴミノヨーダ","ダガ・コトワル","命を燃やせ！","ザワ・ザワ","ナニヤ・テンダ・オマエ","キッショ","アンタ・バカァ？","ニゲチャ・ダメダ"]); //キャラ名 
gndr = getRandomValue([0,1]); //性別,0→女,1→男
race = getRandomValue([0,1,2,3,4,5,6,7,8]); //性別,0→人間,1→エルフ,2→魔族,3→ドワーフ,4→竜人,5→羽人,6→悪魔,7→魚人,8→妖精
let text = "　評価：\n\n";

stats = {
  fam: 0,
  hp: 0, 
  mp: 0, 
  sp: 0, 
  hei: 0,
  wei: 0,
  chr: 0,
  ext: 50, 
  col: 50,
  ope: 50,  
  dil: 50,
  cop: 0,
  str: 0,
  int: 0,
  dur: 0,
  mag: 0,
  dex: 0,
  spe: 0,
  div: 300, 
  cha: 50, 
  rep: 50, 
  abs: 50,  
  ord: 50,
  def: 50,
}
var chara = {};

//種族固有値の行列
var bias =[//地位　hp　　　mp　　　sp 　　　身長　　　体重　　魅力　　外向性　神経質　開放性　誠実度　協調性　　　力　　　智　　耐久　　　魔法　　器用　　俊敏　　発散　　　混沌　　反発　　干渉　　秩序　　収束
      [50,169,100,200,100,200,100,200,170,169,65,100,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,100,50,300,50,300,50,300,50,300,50,300,50,300],
      [55,169, 90,200,130,200, 90,200,170,169,60,100,70,250,30,100,40,200,70,250,50,300,40,200,40,200,70,250,45,200,75,250,60,300,50,100,60,300,30,100,50,300,60,300,70,250,60,300],
      [60, 81,110,200,120,200,110,200,175,169,75,100,55,300,50,300,45,200,50,300,50,300,50,300,60,300,50,300,60,200,65,200,50,300,50,100,30,100,60,200,50,300,50,300,60,300,75,200],
      [50,300,130,200, 30, 81,110,200,120,169,70,100,40,144,55,300,60,300,55,300,65,200,55,300,70,250,50,200,70,250,20, 36,60,300,30, 36,40,200,60,300,60,300,60,300,40,200,40,200],
      [50,300,120,200,120,200,120,200,180,169,90,100,55,300,30,100,70,250,50,300,70,250,40,200,70,250,25, 64,70,250,70,250,30,100,65,100,70,250,80,200,30,100,30,100,10,  4,60,300],
      [50,300, 90,200,100,200,130,200,170,169,75,100,65,200,55,300,35,100,50,300,60,300,50,300,40,200,50,300,45,200,60,200,55,300,70,100,75,200,30,100,40,100,70,250,65,300,40,200],
      [77,25 ,80 ,200,120,200,100,200,170,169,35, 36,75,200,70,200,40,200,60,200,30,100,55,300,35,100,75,200,40,200,65,300,65,300,60,100,10,  4,60,200,60,200,80,144,50,300,80,144],
      [50,300,110,200,90 ,200,120,200,180,169,80,100,45,300,55,300,55,300,55,300,55,300,55,300,60,200,45,200,60,200,45,200,40,100,60,100,40,200,40,200,40,200,60,300,60,200,60,200],
      [50,  0,30 , 49,120,200,100,200, 70, 49,10,  4,75,200,65,200,65,200,60,300,35,100,60,200,20, 25,70,250,30, 81,70,250,75,250,90,200,60,300,60,300,60,300,75,250,60,300,60,300]
];

//描画
function drawCharacter(chara) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  // ヘッダー
  ctx.globalAlpha = 1;
  ctx.fillStyle = 'black';
  // キャラクターの性格と能力を描画
  ctx.font = "14px Arial";
  var y = 20; var n = 0;
  for (var prop in chara) {
    if (chara.hasOwnProperty(prop)) {
      ctx.fillStyle = 'black';
      ctx.globalAlpha = 1;
      ctx.fillText(prop, 10, y);
      ctx.fillText(chara[prop], 80, y);
      if (!isNaN(chara[prop]) && y>100){
        ctx.globalAlpha = 1;
        if(n>4 && (n<6 || n>10)){
          ctx.fillStyle = 'gray';
          if(chara[prop]<1){ctx.fillText("測定不能", 110, y);}
          else if(chara[prop]<10){ctx.fillStyle = 'lightblue';ctx.fillText("E-", 110, y);}
          else if(chara[prop]<20){ctx.fillStyle = 'lightblue';ctx.fillText("E", 110, y);}
          else if(chara[prop]<30){ctx.fillStyle = 'lightgreen';ctx.fillText("D-", 110, y);}
          else if(chara[prop]<40){ctx.fillStyle = 'lightgreen';ctx.fillText("D", 110, y);}
          else if(chara[prop]<50){ctx.fillStyle = 'yellowgreen';ctx.fillText("C", 110, y);}
          else if(chara[prop]<60){ctx.fillStyle = 'yellowgreen';ctx.fillText("C+", 110, y);}
          else if(chara[prop]<65){ctx.fillStyle = 'gold';ctx.fillText("B-", 110, y);}
          else if(chara[prop]<70){ctx.fillStyle = 'gold';ctx.fillText("B", 110, y);}
          else if(chara[prop]<75){ctx.fillStyle = 'gold';ctx.fillText("B+", 110, y);}
          else if(chara[prop]<80){ctx.fillStyle = 'crimson';ctx.fillText("A-", 110, y);}
          else if(chara[prop]<85){ctx.fillStyle = 'crimson';ctx.fillText("A", 110, y);}
          else if(chara[prop]<90){ctx.fillStyle = 'crimson';ctx.fillText("A+", 110, y);}
          else if(chara[prop]<95){ctx.fillStyle = 'purple';ctx.fillText("S-", 110, y);}
          else if(chara[prop]<100){ctx.fillStyle = 'purple';ctx.fillText("S", 110, y);}
          else if(chara[prop]<105){ctx.fillStyle = 'rebeccapurple';ctx.fillText("S+ ", 110, y);}
          else{ctx.fillStyle = 'rebeccapurple';ctx.fillText("測定不能", 110, y);}
        }
        else if(n<3){
          if(chara[prop]<75){ctx.fillStyle = 'lightblue';ctx.fillText("E", 110, y);}
          else if(chara[prop]<90){ctx.fillStyle = 'lightgreen';ctx.fillText("D", 110, y);}
          else if(chara[prop]<105){ctx.fillStyle = 'yellowgreen';ctx.fillText("C", 110, y);}
          else if(chara[prop]<120){ctx.fillStyle = 'gold';ctx.fillText("B", 110, y);}
          else if(chara[prop]<130){ctx.fillStyle = 'crimson';ctx.fillText("A", 110, y);}
          else if(chara[prop]<140){ctx.fillStyle = 'purple';ctx.fillText("S", 110, y);}
          else if(chara[prop]<150){ctx.fillStyle = 'rebeccapurple';ctx.fillText("S+ ", 110, y);}
          else{ctx.fillStyle = 'rebeccapurple';ctx.fillText("測定不能", 110, y);}
        }
      }
      else{n -= 1;}
      y += 18; n ++;
    }
  }
  //ダイアグラム１
  var statusm = [bias[race][24], bias[race][26], bias[race][30], bias[race][34], bias[race][32], bias[race][28]];
  var status = [stats.str, stats.int, stats.mag, stats.spe, stats.dex, stats.dur];
  var centerX = 220; 
  var centerY = 355;
  var sides = statusm.length; // 頂点の数＝データの要素数
  var radius = 30;
  ctx.font = "12px Arial";
  ctx.fillStyle = 'black';
  ctx.globalAlpha = 1/2;
  ctx.lineWidth = 2;
  ctx.strokeStyle = "rgba(100, 100, 100, 0.2)"
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var angle1 = (i-1)/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle)*2;
    var y = centerY + radius * Math.sin(angle)*2;
    var x1 = centerX + radius * Math.cos(angle1)*2;
    var y1 = centerY + radius * Math.sin(angle1)*2;
    let stat;
    if(i==0){stat="力";}
    else if(i==1){stat="智";}
    else if(i==2){stat="魔法";}
    else if(i==3){stat="俊敏";}
    else if(i==4){stat="器用";}
    else if(i==5){stat="耐久";}
    ctx.fillText(stat, x-10, y+5);
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(x, y);
    ctx.lineTo(x1, y1);
    ctx.closePath();
    ctx.stroke();
    for (var n = 0; n < 3; n++){
      x = centerX + radius * Math.cos(angle)*(1/2+n/2);
      y = centerY + radius * Math.sin(angle)*(1/2+n/2);
      x1 = centerX + radius * Math.cos(angle1)*(1/2+n/2);
      y1 = centerY + radius * Math.sin(angle1)*(1/2+n/2);
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(x1, y1);
      ctx.closePath();
      ctx.stroke();
    }
  }
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.strokeStyle = "rgba(0,100,255,0.5)"
  ctx.stroke();
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = status[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.globalAlpha = 1/4;
  ctx.fillStyle = 'blue';
  ctx.fill();
  ctx.strokeStyle = "rgba(0,0,255, 0.3)"
  ctx.lineWidth = 2;
  ctx.stroke();

  //ダイアグラム２
  var statusm = [bias[race][2]/2, bias[race][4]/2, bias[race][12], bias[race][8]/17*5, bias[race][10]/13*10, bias[race][6]/2];
  var status = [stats.hp/2, stats.mp/2, stats.chr, stats.hei/17*5, stats.wei/13*10, stats.sp/2];
  var centerX = 220; 
  var centerY = 90;
  var sides = statusm.length; // 頂点の数＝データの要素数
  var radius = 30;
  ctx.fillStyle = 'black';
  ctx.font = "12px Arial";
  ctx.globalAlpha = 1/2;
  ctx.lineWidth = 2;
  ctx.strokeStyle = "rgba(100, 100, 100, 0.2)"
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var angle1 = (i-1)/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle)*2;
    var y = centerY + radius * Math.sin(angle)*2;
    var x1 = centerX + radius * Math.cos(angle1)*2;
    var y1 = centerY + radius * Math.sin(angle1)*2;
    let stat;
    if(i==0){stat="HP";}
    else if(i==1){stat="MP";}
    else if(i==2){stat="魅力";}
    else if(i==3){stat="身長";}
    else if(i==4){stat="体重";}
    else if(i==5){stat="SP";}
    ctx.fillText(stat, x-10, y+5);
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(x, y);
    ctx.lineTo(x1, y1);
    ctx.closePath();
    ctx.stroke();
    for (var n = 0; n < 3; n++){
      x = centerX + radius * Math.cos(angle)*(1/2+n/2);
      y = centerY + radius * Math.sin(angle)*(1/2+n/2);
      x1 = centerX + radius * Math.cos(angle1)*(1/2+n/2);
      y1 = centerY + radius * Math.sin(angle1)*(1/2+n/2);
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(x1, y1);
      ctx.closePath();
      ctx.stroke();
    }
  }
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.strokeStyle = "rgba(255,0,100,0.5)"
  ctx.stroke();
  //status
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = status[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.globalAlpha = 1/4;
  ctx.fillStyle = 'red';
  ctx.fill();
  ctx.strokeStyle = "rgba(255,0,0, 0.3)"
  ctx.lineWidth = 2;
  ctx.stroke();

  //ダイアグラム3
  var statusm = [bias[race][36], bias[race][38], bias[race][40], bias[race][46], bias[race][44], bias[race][42]];
  var status = [stats.div, stats.cha, stats.rep, stats.def, stats.ord, stats.abs];
  var centerX = 220; 
  var centerY = 495;
  var sides = statusm.length; // 頂点の数＝データの要素数
  var radius = 30;
  ctx.fillStyle = 'black';
  ctx.font = "12px Arial";
  ctx.globalAlpha = 1/2;
  ctx.lineWidth = 2;
  ctx.strokeStyle = "rgba(100, 100, 100, 0.2)"
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var angle1 = (i-1)/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle)*2;
    var y = centerY + radius * Math.sin(angle)*2;
    var x1 = centerX + radius * Math.cos(angle1)*2;
    var y1 = centerY + radius * Math.sin(angle1)*2;
    let stat;
    if(i==0){stat="発散";}
    else if(i==1){stat="混沌";}
    else if(i==2){stat="反発";}
    else if(i==3){stat="収束";}
    else if(i==4){stat="秩序";}
    else if(i==5){stat="干渉";}
    ctx.fillText(stat, x-10, y+5);
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(x, y);
    ctx.lineTo(x1, y1);
    ctx.closePath();
    ctx.stroke();
    for (var n = 0; n < 3; n++){
      x = centerX + radius * Math.cos(angle)*(1/2+n/2);
      y = centerY + radius * Math.sin(angle)*(1/2+n/2);
      x1 = centerX + radius * Math.cos(angle1)*(1/2+n/2);
      y1 = centerY + radius * Math.sin(angle1)*(1/2+n/2);
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(x1, y1);
      ctx.closePath();
      ctx.stroke();
    }
  }
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.strokeStyle = "rgba(0,255,100,0.5)"
  ctx.stroke();
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = status[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.globalAlpha = 1/4;
  ctx.fillStyle = 'green';
  ctx.fill();
  ctx.strokeStyle = "rgba(0,255,0, 0.3)"
  ctx.lineWidth = 2;
  ctx.stroke();

  //ダイアグラム4
  var statusm = [bias[race][14], bias[race][16], bias[race][18], bias[race][20], bias[race][22]];
  var status = [stats.ext, stats.col, stats.ope, stats.dil, stats.cop];
  var centerX = 220; 
  var centerY = 230;
  var sides = statusm.length; // 頂点の数＝データの要素数
  var radius = 30;
  ctx.fillStyle = 'black';
  ctx.font = "12px Arial";
  ctx.globalAlpha = 1/2;
  ctx.lineWidth = 2;
  ctx.strokeStyle = "rgba(100, 100, 100, 0.2)"
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var angle1 = (i-1)/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle)*2;
    var y = centerY + radius * Math.sin(angle)*2;
    var x1 = centerX + radius * Math.cos(angle1)*2;
    var y1 = centerY + radius * Math.sin(angle1)*2;
    let stat;
    if(i==0){stat="外向性";}
    else if(i==1){stat="神経質";}
    else if(i==2){stat="開放性";}
    else if(i==3){stat="誠実性";}
    else if(i==4){stat="協調性";}
    ctx.fillText(stat, x-10, y+5);
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(x, y);
    ctx.lineTo(x1, y1);
    ctx.closePath();
    ctx.stroke();
    for (var n = 0; n < 3; n++){
      x = centerX + radius * Math.cos(angle)*(1/2+n/2);
      y = centerY + radius * Math.sin(angle)*(1/2+n/2);
      x1 = centerX + radius * Math.cos(angle1)*(1/2+n/2);
      y1 = centerY + radius * Math.sin(angle1)*(1/2+n/2);
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(x1, y1);
      ctx.closePath();
      ctx.stroke();
    }
  }
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = statusm[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.strokeStyle = "rgba(255,200,100,0.5)"
  ctx.stroke();
  ctx.beginPath();
  for (var i = 0; i < sides; i++) {
    var angle = i/sides*2*Math.PI-Math.PI/2;
    var value = status[i];
    var x = centerX + radius * Math.cos(angle) * (value / 50);
    var y = centerY + radius * Math.sin(angle) * (value / 50);
    if (i === 0) {ctx.moveTo(x, y);} 
    else {ctx.lineTo(x, y);}
  }
  ctx.closePath();
  ctx.globalAlpha = 1/4;
  ctx.fillStyle = 'orange';
  ctx.fill();
  ctx.strokeStyle = "rgba(255,255,100, 0.3)"
  ctx.lineWidth = 2;
  ctx.stroke();
}
//キャラ生成、パラメータ決定
function generateRandomCharacter() {
  //性別補正
  if(gndr==0){Sex = "♀";bias[race][24]-=5;bias[race][30]+=5;bias[race][32]+=5;bias[race][28]-=5;bias[race][14]+=5;bias[race][18]-=5;}
  else{Sex = "♂";bias[race][24]+=5;bias[race][30]-=5;bias[race][32]-=5;bias[race][28]+=5;bias[race][14]-=5;bias[race][18]+=5;}
  bias[race][26]+=(stats.fam-50)/5; bias[race][12]+=(stats.fam-50)/5;//地位補正
  //ステータス生成
  stats.str=getRandomNumber(bias[race][24], bias[race][25]);if(stats.str<1){stats.str=1};
  stats.int=getRandomNumber(bias[race][26], bias[race][27]);if(stats.int<1){stats.int=1};
  stats.mag=getRandomNumber(bias[race][30], bias[race][31]);if(stats.mag<0){stats.mag=0};
  stats.dur=getRandomNumber(bias[race][28], bias[race][29]);if(stats.dur<1){stats.dur=1};
  stats.dex=getRandomNumber(bias[race][32], bias[race][33]);if(stats.dex<0){stats.dex=0};
  stats.spe=getRandomNumber(bias[race][34], bias[race][35]);
  stats.hp = getRandomNumber(bias[race][2], bias[race][3]);
  stats.mp = getRandomNumber(bias[race][4], bias[race][5]);
  stats.sp = getRandomNumber(bias[race][6], bias[race][7]);
  stats.chr = getRandomNumber(bias[race][12], bias[race][13]);
  stats.hei = getRandomNumber(bias[race][8], bias[race][9]);
  stats.wei = getRandomNumber(bias[race][10], bias[race][11]);
  stats.div=getRandomNumber(bias[race][36], bias[race][37]);if(stats.div<0){stats.div=0};
  stats.cha=getRandomNumber(bias[race][38], bias[race][39]);if(stats.cha<0){stats.cha=0};
  stats.rep=getRandomNumber(bias[race][40], bias[race][41]);if(stats.rep<0){stats.rep=0};
  stats.abs=getRandomNumber(bias[race][42], bias[race][43]);if(stats.abs<0){stats.abs=0};
  stats.ord=getRandomNumber(bias[race][44], bias[race][45]);if(stats.ord<0){stats.ord=0};
  stats.def=getRandomNumber(bias[race][46], bias[race][47]);if(stats.def<0){stats.def=0};
  stats.ext=getRandomNumber(bias[race][14], bias[race][15]);if(stats.ext<0){stats.ext=0};
  stats.col=getRandomNumber(bias[race][16], bias[race][17]);if(stats.col<0){stats.col=0};
  stats.ope=getRandomNumber(bias[race][18], bias[race][19]);if(stats.ope<0){stats.ope=0};
  stats.dil=getRandomNumber(bias[race][20], bias[race][21]);if(stats.dil<0){stats.dil=0};
  stats.cop=getRandomNumber(bias[race][22], bias[race][23]);if(stats.cop<0){stats.cop=0};
  stats.fam=getRandomNumber(bias[race][0], bias[race][1]);
  
  //種族
  if(race==0){
    species = "人間";
    text+="　あなたは人間だ! ただの人間だ...\n";
  }
  else if(race==1){species = "エルフ";text+="　あなたはエルフだ！耳が尖ってて長い!\n";}
  else if(race==2){species = "魔族";text+=getRandomValue(["　あなたは魔族だ!巻角が生えてるよ\n","　あなたは魔族だ!鋭い角が生えてるよ\n"])}
  else if(race==3){species = "ドワーフ";text+=getRandomValue(["　あなたはドワーフだ! お酒が大好きだ!\n","　あなたはドワーフだ! お酒は好きでない...\n"])}
  else if(race==4){species = "竜人";text+="　あなたは竜人だ! 角と飛膜が生えてて鱗もあるよ!\n"}
  else if(race==5){species = "羽人";text+="　あなたは羽人だ! 翼が生えてて天使みたいだ!\n"}
  else if(race==6){species = "悪魔";text+="　あなたは悪魔だ! 見た目を変えられる!\n"}
  else if(race==7){species = "魚人";text+=getRandomValue(["　あなたは魚人だ! 人魚型で足がない...\n","　あなたは魚人だ! 鰓呼吸できる人型だ！\n","　あなたは魚人だ! ...エイリアンのようだ...\n"])}
  else if(race==8){species = "妖精";text+="　あなたは妖精だ! 小さくて羽が生えている\n"}
  //地位
  if(stats.fam<25){family_status="奴隷";text+="　...奴隷のようだ...人は皆、何かの奴隷だ...\n"}
  else if(stats.fam<40){family_status="貧民";text+=getRandomValue(["　貧しい生活ながらも頑張っている!\n","　...スラム街に住む乞食のようだ...\n"])}
  else if(stats.fam<65){family_status="平民";text+=getRandomValue(["　普通の生活をしている\n","　ありふれた毎日を楽しんでいる\n"])}
  else if(stats.fam<70){family_status="富豪";text+=getRandomValue(["　お金持ちのようだ！強盗に気をつけよう！\n","　札束でビンタするのが趣味のようだ！\n"])}
  else if(stats.fam<75){family_status="下級貴族";text+=getRandomValue(["　特権階級様だ...男爵のようだ！\n","　貴種だね、子爵のようだ！\n"])}
  else if(stats.fam<80){family_status="貴族";text+="　御貴族様だ！伯爵だ！\n"}
  else if(stats.fam<85){family_status="上級貴族";text+=getRandomValue(["　貴殿は侯爵ですな！\n","　王家の次に偉いようだ！公爵ですな！\n"])}
  else{family_status="王家";text+="　貴殿は人の上に立つ者...王家の御方だ！\n"}
  
  //評価・髪・
  text+="\n　あなたは、"
  text+=getRandomValue(["金髪","銀髪","青髪","桃髪","黒髪","茶髪"]);
  if(gndr==0){text+=getRandomValue(["ショート","ロング","ミディアム","ボブヘア","ポニテ","ツインテール"]);text+="で";}
  else{text+=getRandomValue(["刈り上げ","ロング","リーゼント","ボブヘア","坊主","モヒカン"]);text+="で";}
  text+=getRandomValue(["金眼","銀眼","碧眼","赤い目","黒眼","茶色っぽい目"]);text+="の";
  if(stats.chr<5){text+="なりだが、この世のものとは思えない貌をしている...　街では化け物と思われ迫害されている..."}
  else if(stats.chr<15){text+="極めて醜い顔の持ち主だ...　極めて交渉事に向かない..."}
  else if(stats.chr<30){text+="ブサイクだ... 交渉に失敗しやすい..."}
  else if(gndr==0){
    if(stats.chr<60){text+="ありふれた風貌の娘だ。"}
    else if(stats.chr<75){text+="かわいい貌の娘だ！　たまに割引してくれそうだ！"}
    else if(stats.chr<90){text+="すごい美人さんだ！　いつも割引してくれそうだ！"}
    else if(stats.chr<100){text+="まさに傾国の美女だ！　あなたが本気を出せば、どんなお願いでも聞いてしまいそうだ！"}
    else if(stats.chr<110){text+="歴史に残る美女だ！　あなたの頼み事は断られない！"}
    else{text+="神の如き美女だ！　その姿を見たものは誰でも堕ちてしまう..."}
  }
  else{
    if(stats.chr<60){text+="フツメンだ。"}
    else if(stats.chr<75){text+="雰囲気イケメンだ。　高い確率で告白に成功するが、NTRに注意..."}
    else if(stats.chr<90){text+="すごいイケメンだ！　恋愛に強いが、夜道に注意..."}
    else if(stats.chr<100){text+="10年に1度のイケメンだ！　モテモテである。ヒモになれそう！"}
    else if(stats.chr<110){text+="100年に1度のイケメンだ！　余裕でハーレムを作れそうだ。ヒモキングになろう！"}
    else{text+="神の如きイケメンだ！　その姿を見たものは誰でも堕ちてしまう...　男はホモになる..."}
  }text+="\n";
  //気質
  text+="\n　あなたの気質については...\n"
  if(stats.cop>60){
    if(stats.dil>60){text+="頼りになり、"}else if(stats.dil<40){text+="謙虚で、"}
    if(stats.ext>60){text+="極めて陽の者で、"}else if(stats.ext<40){text+="臆病で、"}
    if(stats.col>60){text+="情に脆く、"}else if(stats.col<40){text+="リアリストで、"}
    if(stats.ope>60){text+="気が利き、"}else if(stats.ope<40){text+="メンヘラで、"}
  }
  else if(stats.cop<40){
    if(stats.dil>60){text+="頑固で、"}else if(stats.dil<40){text+="無謀で、"}
    if(stats.ext>60){text+="傲慢で、"}else if(stats.ext<40){text+="無口で、"}
    if(stats.col>60){text+="常にイライラしてて、"}else if(stats.col<40){text+="冷淡で、"}
    if(stats.ope>60){text+="抜け目がなく、"}else if(stats.ope<40){text+="粗野で、"}
  }
  if(stats.dil>60){
    if(stats.ext>60){text+="野心家で、"}else if(stats.ext<40){text+="用心深く、"}
    if(stats.col>60){text+="几帳面で、"}else if(stats.col<40){text+="堅実で、"}
    if(stats.ope>60){text+="情報通で、"}else if(stats.ope<40){text+="保守的で、"}
  }
  else if(stats.dil<40){
    if(stats.ext>60){text+="わんぱくで、"}else if(stats.ext<40){text+="捻くれてて、"}
    if(stats.col>60){text+="強引で、"}else if(stats.col<40){text+="控えめで、"}
    if(stats.ope>60){text+="型破りで、"}else if(stats.ope<40){text+="見切り発車で、"}
  }
  if(stats.ext>60){
    if(stats.col>60){text+="浮気しやすく、"}else if(stats.col<40){text+="意識高い系で、"}
    if(stats.ope>60){text+="雄弁で、"}else if(stats.ope<40){text+="気取っていて、"}
  }
  else if(stats.ext<40){
    if(stats.col>60){text+="用心深く、"}else if(stats.col<40){text+="落ち着いていて、"}
    if(stats.ope>60){text+="陰の者で、"}else if(stats.ope<40){text+="極めて陰の者で、"}
  }
  if(stats.col>60){
    if(stats.ope>60){text+="官能的で、"}else if(stats.ope<40){text+="疑い深く、"}
  }
  else if(stats.col<40){
    if(stats.ope>60){text+="創造的で、"}else if(stats.ope<40){text+="鈍感で、"}
  }
  if (stats.ext>= stats.col&& stats.ext>= stats.ope&& stats.ext>= stats.dil&& stats.ext>= stats.cop) {
    text+="人との会話が好きだ！"
  } 
  else if (stats.col>= stats.ext&& stats.col>= stats.ope&& stats.col>= stats.dil&& stats.col>= stats.cop) {
    text+="メンヘラである！"
  } 
  else if (stats.ope>= stats.ext&& stats.ope>= stats.col&& stats.ope>= stats.dil&& stats.ope>= stats.cop) {
    text+="感性豊かである！"
  } 
  else if (stats.dil>= stats.ext&& stats.dil>= stats.col&& stats.dil>= stats.ope&& stats.dil>= stats.cop) {
    text+="とても誠実である！"
  } 
  else{text+="協調性が高い！"}
  if(stats.ext<45 && stats.col<45 && stats.ope<45 && stats.ext<45 && stats.dil<45){text+="　ぶっちゃけカスである！"}
  //基礎能力
  text+="\n\n　あなたの基礎能力については...\n"
  if(stats.str<2){text+="貧弱すぎて移動すらできない...　"}
  else if(stats.str<10){text+="力が貧弱すぎて重い武器が持てない...　"}
  else if(stats.str<30){text+="力が弱い　"}
  else if(stats.str>110){text+="1000年に1度の力持ちだ！　"}
  else if(stats.str>100){text+="100年に1度の力持ちだ！　"}
  else if(stats.str>90){text+="10年に1度の力持ちだ！　"}
  else if(stats.str>70){text+="とても力が強い　"}
  if(stats.int<2){text+="脳みそに皺がない...意思疎通すら不可能　"}
  else if(stats.int<10){text+="アホだ...ほとんど言う事を聞かない　"}
  else if(stats.int<30){text+="バカである　"}
  else if(stats.int>110){text+="1000年に1度の頭脳だ！　"}
  else if(stats.int>100){text+="100年に1度の頭脳だ！　"}
  else if(stats.int>90){text+="10年に1度の頭脳だ！　"}
  else if(stats.int>70){text+="とても頭が良い　"}
  if(stats.dur<2){text+="泡沫の如き儚さ...転んだら死ぬ　"}
  else if(stats.dur<10){text+="打たれ弱い...一撃で死ぬ　"}
  else if(stats.dur<30){text+="打たれ弱い　"}
  else if(stats.dur>110){text+="どんな攻撃も効かない！　"}
  else if(stats.dur>100){text+="どんな攻撃も無効化し得る！　"}
  else if(stats.dur>90){text+="致命的な攻撃にも耐え得る！　"}
  else if(stats.dur>70){text+="とても打たれ強い　"}
  if(stats.mag<2){text+="全く魔法が使えない...　"}
  else if(stats.mag<10){text+="...魔法は一種類しか使えない...　"}
  else if(stats.mag<30){text+="魔法が苦手　"}
  else if(stats.mag>110){text+="1000年に1度の魔法使いだ！　"}
  else if(stats.mag>100){text+="100年に1度の魔法使いだ！　"}
  else if(stats.mag>90){text+="10年に1度の魔法使いだ！　"}
  else if(stats.mag>70){text+="魔法がとても得意　"}
  if(stats.dex<2){text+="不器用すぎて道具が使えない...　"}
  else if(stats.dex<10){text+="不器用だ...道具は一つしか使えない　"}
  else if(stats.dex<30){text+="不器用だ　"}
  else if(stats.dex>110){text+="同時に1000の武器を巧みに操る！　"}
  else if(stats.dex>100){text+="同時に100の武器を巧みに操る！　"}
  else if(stats.dex>90){text+="同時に10の武器を巧みに操る！　"}
  else if(stats.dex>70){text+="とても器用だ　"}
  if(stats.spe<2){text+="...あれ？動かない...ずっと止まっている...　"}
  else if(stats.spe<20){text+="お...そ...i...　"}
  else if(stats.spe<40){text+="遅い　"}
  else if(stats.spe>110){text+="ﾊﾔｲ　速すぎて世界が停止する！　"}
  else if(stats.spe>100){text+="ﾊﾔｲ　同時に複数の行動をする！　"}
  else if(stats.spe>90){text+="ﾊﾔｲ　ほとんどの場合で先制する！　"}
  else if(stats.spe>70){text+="とても速い　"}
  if((stats.spe<=70 && stats.spe>=40)&&(stats.str<=70 && stats.str>=30)&&(stats.int<=70 && stats.int>=30)&&(stats.dur<=70 && stats.dur>=30)&&(stats.mag<=70 && stats.mag>=30)&&(stats.dex<=70 && stats.dex>=30)){
    text+="　普通だ　"
  }
  //属性
  maxVariable = Math.max(stats.div, stats.cha, stats.def, stats.rep, stats.ord, stats.abs);
  if(maxVariable>90){
    text+="\n\n　あなたの属性については...\n　"
    if (stats.div>90) {
      text+="斥力、";
    } 
    if (stats.cha>90) {
      text+=getRandomValue(["熱、","炎、"]);
    } 
    if (stats.def>90) {
      text+="引力、";
    } 
    if (stats.rep>90) {
      text+="金属、";
    } 
    if (stats.ord>90) {
      text+=getRandomValue(["冷、","氷、"]);
    } 
    if (stats.abs>90) {text+="還元、";}
    if(stats.div>80){
      if(stats.cha>80){text+="プラズマ、"}
      if(stats.def>80){text+="超加速、"}
      if(stats.rep>80){text+="反射、"}
      if(stats.ord>80){text+="ビーム、"}
      if(stats.abs>80){text+="破壊、"}
    }
    if(stats.cha>80){
      if(stats.def>80){text+="竜巻、"}
      if(stats.rep>80){text+="溶岩、"}
      if(stats.ord>80){text+="爆発、"}
      if(stats.abs>80){text+="崩壊、"}
    }
    if(stats.def>80){
      if(stats.rep>80){text+="結晶、"}
      if(stats.ord>80){text+="爆縮、"}
      if(stats.abs>80){text+="復元、"}
    }
    if(stats.rep>80){
      if(stats.ord>80){text+="金剛石、"}
      if(stats.abs>80){text+="水銀、"}
    }
    if(stats.ord>80){
      if(stats.abs>80){text+="回復、"}
    }
    text+="の形で現れやすい\n"
  }
  else if(maxVariable>65){
    text+="\n\n　あなたの属性については...\n　"
    if (stats.div>65) {
      text+="光、";
    } 
    if (stats.cha>65) {
      text+="風、";
    } 
    if (stats.def>65) {
      text+="闇、";
    } 
    if (stats.rep>65) {
      text+="岩、";
    } 
    if (stats.ord>65) {
      text+="水、";
    } 
    if (stats.abs>65){text+="酸、";}
    if(stats.div>80){
      if(stats.cha>80){text+="プラズマ、"}
      if(stats.def>80){text+="超加速、"}
      if(stats.rep>80){text+="反射、"}
      if(stats.ord>80){text+="ビーム、"}
      if(stats.abs>80){text+="破壊、"}
    }
    if(stats.cha>80){
      if(stats.def>80){text+="竜巻、"}
      if(stats.rep>80){text+="溶岩、"}
      if(stats.ord>80){text+="爆発、"}
      if(stats.abs>80){text+="崩壊、"}
    }
    if(stats.def>80){
      if(stats.rep>80){text+="結晶、"}
      if(stats.ord>80){text+="爆縮、"}
      if(stats.abs>80){text+="復元、"}
    }
    if(stats.rep>80){
      if(stats.ord>80){text+="金剛石、"}
      if(stats.abs>80){text+="水銀、"}
    }
    if(stats.ord>80){
      if(stats.abs>80){text+="回復、"}
    }
    text+="の形で現れやすい\n"
  }
  else{text+="\n\n　あなたに特異な属性はなく...器用貧乏だ\n"}

  //入力
  chara = {
    名前: CharacterName,
    性別: Sex,
    種族: species,
    地位: family_status,
    ____状態値: "______",
    HP: stats.hp,
    MP: stats.mp,
    SP: stats.sp,
    身長: stats.hei,
    体重: stats.wei,
    魅力: stats.chr,
    _____気質: "______",
    外向性: stats.ext,
    神経質: stats.col,
    開放性: stats.ope,
    誠実性: stats.dil,
    協調性: stats.cop,
    __基礎能力値: "______",
    力: stats.str,
    智: stats.int,
    耐久: stats.dur,
    魔法: stats.mag,
    器用: stats.dex,
    俊敏: stats.spe,
    _____属性: "______",
    発散: stats.div,
    混沌: stats.cha,
    反発: stats.rep,
    収束: stats.def,
    秩序: stats.ord,
    干渉: stats.abs,
    _________: "______",
  };
}

//初期化
function initialize(){
  text = "　評価：\n\n";
  bias =[//地位　hp　　　mp　　　sp 　　　身長　　　体重　　魅力　　外向性　神経質　開放性　誠実度　協調性　　　力　　　智　　耐久　　　魔法　　器用　　俊敏　　発散　　　混沌　　反発　　干渉　　秩序　　収束
    [50,169,100,200,100,200,100,200,170,169,65,100,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,300,50,100,50,300,50,300,50,300,50,300,50,300,50,300],
    [55,169, 90,200,130,200, 90,200,170,169,60,100,70,250,30,100,40,200,70,250,50,300,40,200,40,200,70,250,45,200,75,250,60,300,50,100,60,300,30,100,50,300,60,300,70,250,60,300],
    [60, 81,110,200,120,200,110,200,175,169,75,100,55,300,50,300,45,200,50,300,50,300,50,300,60,300,50,300,60,200,65,200,50,300,50,100,30,100,60,200,50,300,50,300,60,300,75,200],
    [50,300,130,200, 30, 81,110,200,120,169,70,100,40,144,55,300,60,300,55,300,65,200,55,300,70,250,50,200,70,250,20, 36,60,300,30, 36,40,200,60,300,60,300,60,300,40,200,40,200],
    [50,300,120,200,120,200,120,200,180,169,90,100,55,300,30,100,70,250,50,300,70,250,40,200,70,250,25, 64,70,250,70,250,30,100,65,100,70,250,80,200,30,100,30,100,10,  4,60,300],
    [50,300, 90,200,100,200,130,200,170,169,75,100,65,200,55,300,35,100,50,300,60,300,50,300,40,200,50,300,45,200,60,200,55,300,70,100,75,200,30,100,40,100,70,250,65,300,40,200],
    [77,25 ,80 ,200,120,200,100,200,170,169,35, 36,75,200,70,200,40,200,60,200,30,100,55,300,35,100,75,200,40,200,65,300,65,300,60,100,10,  4,60,200,60,200,80,144,50,300,80,144],
    [50,300,110,200,90 ,200,120,200,180,169,80,100,45,300,55,300,55,300,55,300,55,300,55,300,60,200,45,200,60,200,45,200,40,100,60,100,40,200,40,200,40,200,60,300,60,200,60,200],
    [50,  0,30 , 49,120,200,100,200, 70, 49,10,  4,75,200,65,200,65,200,60,300,35,100,60,200,20, 25,70,250,30, 81,70,250,75,250,90,200,60,300,60,300,60,300,75,250,60,300,60,300]
  ];
}
//文字列の中で等確率で要素を決定
function getRandomValue(array) {
  return array[Math.floor(Math.random() * array.length)];
}
//平均値分散を入力し正規分布整数乱数を生成
function getRandomNumber(mean, variance) {
  // Box-Muller変換
  var u1 = Math.random();
  var u2 = Math.random();

  var z0 = Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);

  // z0が標準正規分布に従うため、平均と分散を適用
  var randomValue = mean + Math.sqrt(variance) * z0;

  //整数化
  randomValue = Math.round(randomValue)

  return randomValue;
}
//canvasのサイズ合わせ　→ しない
function resizeCanvas() {
  //実行内容を更新
  document.getElementById("generatedText").innerHTML = text.replace(/\n/g, '<br>');;
  drawCharacter(chara);
}
//変数入力
function changeVariable(){
  CharacterName = document.getElementById('variableInput').value;
  gndr = document.getElementById('selectInput').value;
  race = document.getElementById('selectInput1').value;
  initialize();
  generateRandomCharacter();
  drawCharacter(chara);
  document.getElementById("generatedText").innerHTML = text.replace(/\n/g, '<br>');;
}

//正規分布乱数の生成と描画
function generateRandomNumbers(){
  const mean = parseFloat(document.getElementById('mean').value);
  const stdDev = parseFloat(document.getElementById('stdDev').value);
  const randomNumbers = getRandomNumber(mean, stdDev**2);
  document.getElementById("generatedText1").innerHTML = randomNumbers;

}

generateRandomCharacter();
//canvasサイズ変更
resizeCanvas();
window.addEventListener('resize',resizeCanvas);
</script>
</body>
</html>
